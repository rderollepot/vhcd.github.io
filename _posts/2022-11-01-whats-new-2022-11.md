---
published: false
title: 'What we''ve been up to, November 2022'
---
What did we do those past 3 months? I didn't quite remember myself before deciding to write it up, so let's all dive in and see what's new.

# Vulnerable Road Users

In a [previous entry](/whats-new-2022-08/#pedestrians) I mentioned our work around Vulnerable Road Users (VRUs), which are a critical piece of our research. Over time we've worked a lot on pedestrians, but the past months we focused on "rides", mostly bicycles and E-scooters.

Rides are somewhat tricky to implement properly, as they're the result of the interaction of two bodies: the ride (vehicle) and the rider (character). To get a realistic and customizable behavior, both are implemented as [Skeletal Meshes](https://docs.unrealengine.com/4.27/en-US/WorkingWithContent/Types/SkeletalMeshes/), with the ride being driven by Unreal's vehicle framework (PhysX or Chaos), and the rider being animated by a home-made [Animation Blueprint](https://docs.unrealengine.com/5.0/en-US/animation-blueprints-in-unreal-engine), which actually works across *all* rides' types (e.g., bikes, scooter).

But when you have a wide range of rides *and* riders (e.g., child, adult), it starts to become quite complex to ensure the compatibility between all of those: a child and an adult aren't riding a scooter the same way. A lot of things can change: handle height, hands/feet position, elbow orientation, and so on.

And that's where Unreal "Data Asset" come into the picture. We can easily create assets that will hold all of the configuration values for a character, so that it perfectly fits our rides, and so we can easily reuse it. Since we have a rather large collection of characters, coming from various sources (e.g., Marketplace, CARLA), we've been able to build a library of Data Asset that can perfectly fit all of them into our rides. And Data Assets can even be edited at runtime, meaning it's super easy to fine tune every setting.

<video width="720" height="480" controls>
  <source type="video/mp4"
src="https://cdn.discordapp.com/attachments/725724080526852126/1034434419169173514/da_rider.mp4.mp4">
</video>

And as the video above shows: once you've defined your "rider" Data Asset, there's nothing stopping you from adding more than one rider on a single scooter! You just need to create Data Assets for both the "rider" and the "passenger", each having its own position offsets so that they both fit on the vehicle. This will be especially useful for an upcoming experiment, which aims at recreating complex and emerging car-VRU interactions.

Data Assets
Scooter 2 riders

# Unreal Engine 5

Migration mostly done, but master still 4.27
5.1 => Switchboard scripting, Chaos vehicle fix
Verse + Skein?

# NEWMOB

Training done
Level streaming + optim
Main scenario coming

# Varjo

Varjo-mobile
Scooter demo + sim?

# Misc

Input debug UI
Gitlab migration

# Marketplace

Bus, highway signs